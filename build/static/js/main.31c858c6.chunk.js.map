{"version":3,"sources":["firebase.js","context/ChatProvider.js","components/Agregar.jsx","components/Chat.jsx","components/Navbar.jsx","App.jsx","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","db","firestore","provider","GoogleAuthProvider","ChatContext","React","createContext","ChatProvider","props","useState","uid","email","estado","usuario","setUsuario","mensajes","setMensajes","useEffect","detectarUsuario","onAuthStateChanged","user","cargarMensajes","ingresoUsuario","a","signInWithPopup","console","log","collection","orderBy","onSnapshot","query","arrayMensajes","docs","map","item","data","agregarMensajes","texto","add","fecha","Date","now","Provider","value","cerrarSesion","signOut","children","Agregar","useContext","mensaje","setMensaje","className","onSubmit","e","preventDefault","trim","type","onChange","target","Chat","refZonaChat","useRef","current","scrollTop","scrollHeight","style","height","overflowY","ref","index","Navbar","onClick","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.31c858c6.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDHDlKbI0bEEvEztlFgMHh0Bfjjcbbz-Hk\",\r\n    authDomain: \"chat-udemy-react.firebaseapp.com\",\r\n    projectId: \"chat-udemy-react\",\r\n    storageBucket: \"chat-udemy-react.appspot.com\",\r\n    messagingSenderId: \"106908414933\",\r\n    appId: \"1:106908414933:web:25f88048894b09caad035c\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst auth = firebase.auth()\r\nconst db = firebase.firestore()\r\nconst provider = new firebase.auth.GoogleAuthProvider()\r\n\r\n\r\nexport { auth, db, provider }","import React from 'react'\r\nimport {db, auth, provider} from '../firebase'\r\n\r\nexport const ChatContext = React.createContext()\r\n\r\nconst ChatProvider = (props) => {\r\n\r\n    const dataUsuario = {\r\n        uid: null,\r\n        email: null,\r\n        estado: null\r\n    }\r\n    const [usuario, setUsuario] = React.useState(dataUsuario)\r\n    const [mensajes, setMensajes] = React.useState([])\r\n\r\n    React.useEffect(()=>{\r\n\r\n        detectarUsuario()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\r\n    }, [])\r\n    \r\n\r\n    const detectarUsuario = () =>{\r\n        auth.onAuthStateChanged(user => {\r\n            if(user){\r\n                setUsuario({\r\n                    uid: user.uid,\r\n                    email: user.email,\r\n                    estado: true\r\n                })\r\n                cargarMensajes()\r\n\r\n            }else{\r\n                setUsuario({\r\n                    uid: null,\r\n                    email: null,\r\n                    estado: false\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    const ingresoUsuario = async()=>{\r\n        try{\r\n            await auth.signInWithPopup(provider)\r\n            \r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const cerrarSesion = () => {\r\n        auth.signOut()\r\n    }\r\n\r\n    const cargarMensajes = () => {\r\n        db.collection('chat').orderBy('fecha').onSnapshot(query => {\r\n            const arrayMensajes = query.docs.map( item => item.data())\r\n            setMensajes(arrayMensajes)\r\n        })\r\n    }\r\n\r\n    const agregarMensajes = async(uid, texto) => {\r\n        try{\r\n            await db.collection('chat').add({\r\n                fecha: Date.now(),\r\n                texto: texto,\r\n                uid: uid\r\n            })\r\n\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n    \r\n    \r\n    return (\r\n        <ChatContext.Provider value={{usuario, ingresoUsuario, cerrarSesion, mensajes, agregarMensajes}}>\r\n          {props.children}  \r\n        </ChatContext.Provider>\r\n    )\r\n}\r\n\r\nexport default ChatProvider\r\n","import React from 'react'\r\nimport { ChatContext } from '../context/ChatProvider'\r\n\r\nconst Agregar = () => {\r\n\r\n    const {agregarMensajes, usuario} = React.useContext(ChatContext)\r\n    const [mensaje, setMensaje] = React.useState('')\r\n\r\n    const agregar = e => {\r\n        e.preventDefault()\r\n        if(!mensaje.trim()){\r\n            return\r\n        }\r\n\r\n        agregarMensajes(usuario.uid, mensaje)\r\n        setMensaje('')\r\n\r\n    }\r\n\r\n    return (\r\n        <form className=\"fixed-bottom input-group p-3 bg-dark\" onSubmit={agregar}>\r\n            <input type=\"text\" className=\"form-control\" value={mensaje} onChange={ e=> setMensaje(e.target.value) }/>\r\n            <div className=\"input-group-append\">\r\n                <button className=\"btn btn-primary\" type=\"submit\">Enviar</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Agregar\r\n","import React from 'react'\r\nimport Agregar from './Agregar'\r\nimport { ChatContext } from '../context/ChatProvider'\r\n\r\nconst Chat = () => {\r\n\r\n    const {mensajes, usuario} = React.useContext(ChatContext)\r\n    const refZonaChat = React.useRef(null)\r\n\r\n    React.useEffect(()=>{\r\n        refZonaChat.current.scrollTop = refZonaChat.current.scrollHeight\r\n    }, [mensajes])\r\n\r\n    return (\r\n        <div className=\"mt-3 px-2\" style={{\r\n            height:'70vh',\r\n            overflowY: 'scroll',\r\n            \r\n        }}\r\n        \r\n        ref={refZonaChat}\r\n\r\n        >\r\n            {\r\n                mensajes.map((item, index) => (\r\n                    usuario.uid === item.uid ? (\r\n                        <div className=\"d-flex justify-content-end mb-2\" key={index}>\r\n                            <span className=\"badge badge-pill badge-primary p-2\" >{item.texto}</span>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"d-flex justify-content-start mb-2\" key={index}>\r\n                            <span className=\"badge badge-pill badge-secondary p-2\" >{item.texto}</span>\r\n                        </div>\r\n                    )\r\n                ))\r\n            }\r\n            \r\n            \r\n            <Agregar/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import React from 'react'\r\nimport { ChatContext } from '../context/ChatProvider'\r\n\r\nconst Navbar = () => {\r\n\r\n    const {usuario, ingresoUsuario, cerrarSesion} = React.useContext(ChatContext)\r\n\r\n    return (\r\n        <div className=\"navbar navbar-dark bg-dark\">\r\n            <span className=\"navbar-brand\">\r\n                Chat\r\n            </span>\r\n            <div>\r\n                {\r\n                    usuario.estado ? (\r\n                        <button className=\"btn btn-outline-danger my-2\" onClick={cerrarSesion}>\r\n                            Cerrar Sesion\r\n                        </button>\r\n                    ) : (\r\n                        <button className=\"btn btn-outline-success my-2\" onClick={ ingresoUsuario } >\r\n                            Acceder\r\n                        </button>\r\n                    )\r\n                }\r\n                \r\n                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n","import React from 'react'\r\nimport Chat from './components/Chat'\r\nimport Navbar from './components/Navbar'\r\nimport { ChatContext } from './context/ChatProvider'\r\n\r\nconst App = () => {\r\n\r\n    const {usuario} = React.useContext(ChatContext)\r\n\r\n    return usuario !== null ?(\r\n        <div>\r\n            <Navbar/>\r\n            {\r\n                usuario.estado ? (\r\n                    <Chat/>\r\n                ) : (\r\n                    <div className=\"lead text-center mt-5\">Debes iniciar sesion</div>\r\n                )\r\n            }\r\n            \r\n        </div>\r\n    ) : null\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\nimport ChatProvider from './context/ChatProvider'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ChatProvider>\n      <App />\n    </ChatProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}