(this["webpackJsonpchat-react-udemy"]=this["webpackJsonpchat-react-udemy"]||[]).push([[0],{26:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),c=a(16),s=a.n(c),i=a(9),u=a(10),o=a.n(u),l=a(14),d=a(11);a(27),a(23);d.a.initializeApp({apiKey:"AIzaSyDHDlKbI0bEEvEztlFgMHh0Bfjjcbbz-Hk",authDomain:"chat-udemy-react.firebaseapp.com",projectId:"chat-udemy-react",storageBucket:"chat-udemy-react.appspot.com",messagingSenderId:"106908414933",appId:"1:106908414933:web:25f88048894b09caad035c"});var b=d.a.auth(),j=d.a.firestore(),p=new d.a.auth.GoogleAuthProvider,h=a(3),m=r.a.createContext(),f=function(e){var t=r.a.useState({uid:null,email:null,estado:null}),a=Object(i.a)(t,2),n=a[0],c=a[1],s=r.a.useState([]),u=Object(i.a)(s,2),d=u[0],f=u[1];r.a.useEffect((function(){x()}),[]);var x=function(){b.onAuthStateChanged((function(e){e?(c({uid:e.uid,email:e.email,estado:!0}),g()):c({uid:null,email:null,estado:!1})}))},v=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.signInWithPopup(p);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),g=function(){j.collection("chat").orderBy("fecha").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));f(t)}))},O=function(){var e=Object(l.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.collection("chat").add({fecha:Date.now(),texto:a,uid:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(h.jsx)(m.Provider,{value:{usuario:n,ingresoUsuario:v,cerrarSesion:function(){b.signOut()},mensajes:d,agregarMensajes:O},children:e.children})},x=function(){var e=r.a.useContext(m),t=e.agregarMensajes,a=e.usuario,n=r.a.useState(""),c=Object(i.a)(n,2),s=c[0],u=c[1];return Object(h.jsxs)("form",{className:"fixed-bottom input-group p-3 bg-dark",onSubmit:function(e){e.preventDefault(),s.trim()&&(t(a.uid,s),u(""))},children:[Object(h.jsx)("input",{type:"text",className:"form-control",value:s,onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("div",{className:"input-group-append",children:Object(h.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Enviar"})})]})},v=function(){var e=r.a.useContext(m),t=e.mensajes,a=e.usuario,n=r.a.useRef(null);return r.a.useEffect((function(){n.current.scrollTop=n.current.scrollHeight}),[t]),Object(h.jsxs)("div",{className:"mt-3 px-2",style:{height:"70vh",overflowY:"scroll"},ref:n,children:[t.map((function(e,t){return a.uid===e.uid?Object(h.jsx)("div",{className:"d-flex justify-content-end mb-2",children:Object(h.jsx)("span",{className:"badge badge-pill badge-primary p-2",children:e.texto})},t):Object(h.jsx)("div",{className:"d-flex justify-content-start mb-2",children:Object(h.jsx)("span",{className:"badge badge-pill badge-secondary p-2",children:e.texto})},t)})),Object(h.jsx)(x,{})]})},g=function(){var e=r.a.useContext(m),t=e.usuario,a=e.ingresoUsuario,n=e.cerrarSesion;return Object(h.jsxs)("div",{className:"navbar navbar-dark bg-dark",children:[Object(h.jsx)("span",{className:"navbar-brand",children:"Chat"}),Object(h.jsx)("div",{children:t.estado?Object(h.jsx)("button",{className:"btn btn-outline-danger my-2",onClick:n,children:"Cerrar Sesion"}):Object(h.jsx)("button",{className:"btn btn-outline-success my-2",onClick:a,children:"Acceder"})})]})},O=function(){var e=r.a.useContext(m).usuario;return null!==e?Object(h.jsxs)("div",{children:[Object(h.jsx)(g,{}),e.estado?Object(h.jsx)(v,{}):Object(h.jsx)("div",{className:"lead text-center mt-5",children:"Debes iniciar sesion"})]}):null};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(f,{children:Object(h.jsx)(O,{})})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.31c858c6.chunk.js.map